(function(){function r(e,t){this.channels=e,this.sampleRate=t}function s(){}function o(e,t){this.audioParameters=e,this.data=t,this.readPosition=0}function u(){this.currentWritePosition=0,this.__buffers=[]}function a(e){this.audioParameters=e,this.__sources=[]}var e,t=this.Float32Array||Array,n=this.sfxr=function(){var e=function(e){e.waveType=0,e.startFrequency=.3,e.minFrequency=0,e.slide=0,e.deltaSlide=0,e.squareDuty=0,e.dutySweep=0,e.vibratoDepth=0,e.vibratoSpeed=0,e.attackTime=0,e.sustainTime=.3,e.decayTime=.4,e.sustainPunch=0,e.lpFilterResonance=0,e.lpFilterCutoff=1,e.lpFilterCutoffSweep=0,e.hpFilterCutoff=0,e.hpFilterCutoffSweep=0,e.phaserOffset=0,e.phaserSweep=0,e.repeatSpeed=0,e.changeSpeed=0,e.changeAmount=0};return{generatePickupCoin:function(t){t.deleteCache(),e(t),t.startFrequency=.4+Math.random()*.5,t.sustainTime=Math.random()*.1,t.decayTime=.1+Math.random()*.4,t.sustainPunch=.3+Math.random()*.3,Math.random()<.5&&(t.changeSpeed=.5+Math.random()*.2,t.changeAmount=.2+Math.random()*.4)},generateLaserShoot:function(t){t.deleteCache(),e(t),t.waveType=Math.floor(Math.random()*3),t.waveType==2&&Math.random()<.5&&(t.waveType=Math.floor(Math.random()*2)),t.startFrequency=.5+Math.random()*.5,t.minFrequency=t.startFrequency-.2-Math.random()*.6,t.minFrequency<.2&&(t.minFrequency=.2),t.slide=-0.15-Math.random()*.2,Math.random()<.33&&(t.startFrequency=.3+Math.random()*.6,t.minFrequency=Math.random()*.1,t.slide=-0.35-Math.random()*.3),Math.random()<.5?(t.squareDuty=Math.random()*.5,t.dutySweep=Math.random()*.2):(t.squareDuty=.4+Math.random()*.5,t.dutySweep=-Math.random()*.7),t.sustainTime=.1+Math.random()*.2,t.decayTime=Math.random()*.4,Math.random()<.5&&(t.sustainPunch=Math.random()*.3),Math.random()<.33&&(t.phaserOffset=Math.random()*.2,t.phaserSweep=-Math.random()*.2),Math.random()<.5&&(t.hpFilterCutoff=Math.random()*.3)},generateExplosion:function(t){t.deleteCache(),e(t),t.waveType=3,Math.random()<.5?(t.startFrequency=.1+Math.random()*.4,t.slide=-0.1+Math.random()*.4):(t.startFrequency=.2+Math.random()*.7,t.slide=-0.2-Math.random()*.2),t.startFrequency*=t.startFrequency,Math.random()<.2&&(t.slide=0),Math.random()<.33&&(t.repeatSpeed=.3+Math.random()*.5),t.sustainTime=.1+Math.random()*.3,t.decayTime=Math.random()*.5,t.sustainPunch=.2+Math.random()*.6,Math.random()<.5&&(t.phaserOffset=-0.3+Math.random()*.9,t.phaserSweep=-Math.random()*.3),Math.random()<.33&&(t.changeSpeed=.6+Math.random()*.3,t.changeAmount=.8-Math.random()*1.6)},generatePowerup:function(t){t.deleteCache(),e(t),Math.random()<.5?t.waveType=1:t.squareDuty=Math.random()*.6,Math.random()<.5?(t.startFrequency=.2+Math.random()*.3,t.slide=.1+Math.random()*.4,t.repeatSpeed=.4+Math.random()*.4):(t.startFrequency=.2+Math.random()*.3,t.slide=.05+Math.random()*.2,Math.random()<.5&&(t.vibratoDepth=Math.random()*.7,t.vibratoSpeed=Math.random()*.6)),t.sustainTime=Math.random()*.4,t.decayTime=.1+Math.random()*.4},generateHitHurt:function(t){t.deleteCache(),e(t),t.waveType=Math.floor(Math.random()*3),t.waveType==2?t.waveType=3:t.waveType==0&&(t.squareDuty=Math.random()*.6),t.startFrequency=.2+Math.random()*.6,t.slide=-0.3-Math.random()*.4,t.sustainTime=Math.random()*.1,t.decayTime=.1+Math.random()*.2,Math.random()<.5&&(t.hpFilterCutoff=Math.random()*.3)},generateJump:function(t){t.deleteCache(),e(t),t.waveType=0,t.squareDuty=Math.random()*.6,t.startFrequency=.3+Math.random()*.3,t.slide=.1+Math.random()*.2,t.sustainTime=.1+Math.random()*.3,t.decayTime=.1+Math.random()*.2,Math.random()<.5&&(t.hpFilterCutoff=Math.random()*.3),Math.random()<.5&&(t.lpFilterCutoff=1-Math.random()*.6)},generateBlipSelect:function(t){t.deleteCache(),e(t),t.waveType=Math.floor(Math.random()*2),t.waveType==0&&(t.squareDuty=Math.random()*.6),t.startFrequency=.2+Math.random()*.4,t.sustainTime=.1+Math.random()*.1,t.decayTime=Math.random()*.2,t.hpFilterCutoff=.1},mutate:function(e,t){t=t||.05,e.deleteCache(),Math.random()<.5&&(e.startFrequency+=Math.random()*t*2-t),Math.random()<.5&&(e.minFrequency+=Math.random()*t*2-t),Math.random()<.5&&(e.slide+=Math.random()*t*2-t),Math.random()<.5&&(e.deltaSlide+=Math.random()*t*2-t),Math.random()<.5&&(e.squareDuty+=Math.random()*t*2-t),Math.random()<.5&&(e.dutySweep+=Math.random()*t*2-t),Math.random()<.5&&(e.vibratoDepth+=Math.random()*t*2-t),Math.random()<.5&&(e.vibratoSpeed+=Math.random()*t*2-t),Math.random()<.5&&(e.attackTime+=Math.random()*t*2-t),Math.random()<.5&&(e.sustainTime+=Math.random()*t*2-t),Math.random()<.5&&(e.decayTime+=Math.random()*t*2-t),Math.random()<.5&&(e.sustainPunch+=Math.random()*t*2-t),Math.random()<.5&&(e.lpFilterCutoff+=Math.random()*t*2-t),Math.random()<.5&&(e.lpFilterCutoffSweep+=Math.random()*t*2-t),Math.random()<.5&&(e.lpFilterResonance+=Math.random()*t*2-t),Math.random()<.5&&(e.hpFilterCutoff+=Math.random()*t*2-t),Math.random()<.5&&(e.hpFilterCutoffSweep+=Math.random()*t*2-t),Math.random()<.5&&(e.phaserOffset+=Math.random()*t*2-t),Math.random()<.5&&(e.phaserSweep+=Math.random()*t*2-t),Math.random()<.5&&(e.repeatSpeed+=Math.random()*t*2-t),Math.random()<.5&&(e.changeSpeed+=Math.random()*t*2-t),Math.random()<.5&&(e.changeAmount+=Math.random()*t*2-t),e.validate()},randomize:function(e){e.deleteCache(),e.waveType=Math.floor(Math.random()*4),e.attackTime=Math.pow(Math.random()*2-1,4),e.sustainTime=Math.pow(Math.random()*2-1,2),e.sustainPunch=Math.pow(Math.random()*.8,2),e.decayTime=Math.random(),e.startFrequency=Math.random()<.5?Math.pow(Math.random()*2-1,2):Math.pow(Math.random()*.5,3)+.5,e.minFrequency=0,e.slide=Math.pow(Math.random()*2-1,5),e.deltaSlide=Math.pow(Math.random()*2-1,3),e.vibratoDepth=Math.pow(Math.random()*2-1,3),e.vibratoSpeed=Math.random()*2-1,e.changeAmount=Math.random()*2-1,e.changeSpeed=Math.random()*2-1,e.squareDuty=Math.random()*2-1,e.dutySweep=Math.pow(Math.random()*2-1,3),e.repeatSpeed=Math.random()*2-1,e.phaserOffset=Math.pow(Math.random()*2-1,3),e.phaserSweep=Math.pow(Math.random()*2-1,3),e.lpFilterCutoff=1-Math.pow(Math.random(),3),e.lpFilterCutoffSweep=Math.pow(Math.random()*2-1,3),e.lpFilterResonance=Math.random()*2-1,e.hpFilterCutoff=Math.pow(Math.random(),5),e.hpFilterCutoffSweep=Math.pow(Math.random()*2-1,5),e.attackTime+e.sustainTime+e.decayTime<.2&&(e.sustainTime=.2+Math.random()*.3,e.decayTime=.2+Math.random()*.3);if(e.startFrequency>.7&&e.slide>.2||e.startFrequency<.2&&e.slide<-0.05)e.slide=-e.slide;e.lpFilterCutoff<.1&&e.lpFilterCutoffSweep<-0.05&&(e.lpFilterCutoffSweep=-e.lpFilterCutoffSweep)}}}();n.Synth=function(){this.waveType=0,this.sampleRate=44100,this.bitDepth=16,this.masterVolume=.5,this.attackTime=0,this.sustainTime=0,this.sustainPunch=0,this.decayTime=0,this.startFrequency=0,this.minFrequency=0,this.slide=0,this.deltaSlide=0,this.vibratoDepth=0,this.vibratoSpeed=0,this.changeAmount=0,this.changeSpeed=0,this.squareDuty=0,this.dutySweep=0,this.repeatSpeed=0,this.phaserOffset=0,this.phaserSweep=0,this.lpFilterCutoff=0,this.lpFilterCutoffSweep=0,this.lpFilterResonance=0,this.hpFilterCutoff=0,this.hpFilterCutoffSweep=0;var r,i=[],s=0,u,a=0,c=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=0,F=0,I=0,q=0,R=0,U=[],z=0,W=0,X=0,V=0,$=0,J=0,K=0,Q=0,G=0,Y=[],Z=0,et=0,tt=0,nt=0,rt=this;this.audioBuffer,this.play=function(){lt(!0);var e=w?Math.floor(w):3072;this.audioBuffer=new t(e),ct(this.audioBuffer,this.audioBuffer.length,!0);var n=new o(f,this.audioBuffer);l.addInputSource(n)};var it=this.play;this.updateBuffer=function(){lt(!0);var e=w?Math.floor(w):3072;return this.audioBuffer=new t(e),ct(this.audioBuffer,this.audioBuffer.length,!0),this.audioBuffer},this.playMutated=function(e){e=e||.5,u=mt(),SfxrGenerator.mutate(this,e),it()};var st=this.playMutated;this.deleteCache=function(){};var ot=this.deleteCache;this.validate=function(){this.waveType>3&&(this.waveType=0),this.sampleRate!=22050&&(this.sampleRate=44100),this.bitDepth!=8&&(this.bitDepth=16),this.masterVolume=at(this.masterVolume),this.attackTime=at(this.attackTime),this.sustainTime=at(this.sustainTime),this.sustainPunch=at(this.sustainPunch),this.decayTime=at(this.decayTime),this.startFrequency=at(this.startFrequency),this.minFrequency=at(this.minFrequency),this.slide=ft(this.slide),this.deltaSlide=ft(this.deltaSlide),this.vibratoDepth=at(this.vibratoDepth),this.vibratoSpeed=at(this.vibratoSpeed),this.changeAmount=ft(this.changeAmount),this.changeSpeed=at(this.changeSpeed),this.squareDuty=at(this.squareDuty),this.dutySweep=ft(this.dutySweep),this.repeatSpeed=at(this.repeatSpeed),this.phaserOffset=ft(this.phaserOffset),this.phaserSweep=ft(this.phaserSweep),this.lpFilterCutoff=at(this.lpFilterCutoff),this.lpFilterCutoffSweep=ft(this.lpFilterCutoffSweep),this.lpFilterResonance=at(this.lpFilterResonance),this.hpFilterCutoff=at(this.hpFilterCutoff),this.hpFilterCutoffSweep=ft(this.hpFilterCutoffSweep)};var ut=this.validate,at=function(e){return e>1?1:e<0?0:e},ft=function(e){return e>1?1:e<-1?-1:e},lt=function(e){x=100/(rt.startFrequency*rt.startFrequency+.001),N=100/(rt.minFrequency*rt.minFrequency+.001),C=1-rt.slide*rt.slide*rt.slide*.01,k=-rt.deltaSlide*rt.deltaSlide*rt.deltaSlide*1e-6,P=.5-rt.squareDuty*.5,H=-rt.dutySweep*5e-5,rt.changeAmount>0?M=1-rt.changeAmount*rt.changeAmount*.9:M=1+rt.changeAmount*rt.changeAmount*10,_=0,rt.changeSpeed===1?D=0:D=(1-rt.changeSpeed)*(1-rt.changeSpeed)*2e4+32;if(e){E=0,z=0,X=0,V=rt.lpFilterCutoff*rt.lpFilterCutoff*rt.lpFilterCutoff*.1,$=1+rt.lpFilterCutoffSweep*1e-4,J=5/(1+rt.lpFilterResonance*rt.lpFilterResonance*20)*(.01+V),J>.8&&(J=.8),K=0,Q=rt.hpFilterCutoff*rt.hpFilterCutoff*.1,G=1+rt.hpFilterCutoffSweep*3e-4,L=0,A=rt.vibratoSpeed*rt.vibratoSpeed*.01,O=rt.vibratoDepth*.5,a=0,c=0,h=0,d=rt.attackTime*rt.attackTime*1e5,v=rt.sustainTime*rt.sustainTime*1e5,m=rt.decayTime*rt.decayTime*1e5,p=d,w=d+v+m,g=1/d,y=1/v,b=1/m,F=rt.phaserOffset*rt.phaserOffset*1020,rt.phaserOffset<0&&(F=-F),I=rt.phaserSweep*rt.phaserSweep,I<0&&(I=-I),R=0,U||(U=new t(1024)),Y||(Y=new t(32));for(var n=0;n<1024;n++)U[n]=0;for(var n=0;n<32;n++)Y[n]=Math.random()*2-1;B=0,rt.repeatSpeed==0?j=0:j=Math.floor((1-rt.repeatSpeed)*(1-rt.repeatSpeed)*2e4)+32}},ct=function(e,t,n){n=!!n;var r=!1;tt=0,nt=0;for(var i=0;i<t;i++){if(r)return;j!=0&&++B>=j&&(B=0,lt(!1)),D!=0&&++_>=D&&(D=0,x*=M),C+=k,x*=C,x>N&&(x=N,rt.minFrequency>0&&(r=!0)),T=x,O>0&&(L+=A,T=x*(1+Math.sin(L)*O)),T=Math.floor(T),T<8&&(T=8),P+=H,P<0?P=0:P>.5&&(P=.5);if(++h>p){h=0;switch(++c){case 1:p=v;break;case 2:p=m}}switch(c){case 0:a=h*g;break;case 1:a=1+(1-h*y)*2*rt.sustainPunch;break;case 2:a=1-h*b;break;case 3:a=0,r=!0}F+=I,q=Math.floor(F),q<0?q=-q:q>1023&&(q=1023),G!=0&&(Q*=G,Q<1e-5?Q=1e-5:Q>.1&&(Q=.1)),Z=0;for(var s=0;s<8;s++){et=0,E++;if(E>=T){E%=T;if(rt.waveType==3)for(var o=0;o<32;o++)Y[o]=Math.random()*2-1}S=E/T;switch(rt.waveType){case 0:et=S<P?.5:-0.5;break;case 1:et=1-S*2;break;case 2:et=Math.sin(S*Math.PI*2);break;case 3:et=Y[Math.floor(E*32/Math.floor(T))]}W=z,V*=$,V<0?V=0:V>.1&&(V=.1),rt.lpFilterCutoff!=1?(X+=(et-z)*V*4,X-=X*J):(z=et,X=0),z+=X,K+=z-W,K-=K*V,et=K,U[R&1023]=et,et+=U[R-q+1024&1023],R=R+1&1023,Z+=et}Z=rt.masterVolume*rt.masterVolume*a*Z/8,Z>1&&(Z=1),Z<-1&&(Z=-1);if(n)e[i]=Z,e[i+1]=Z;else{nt+=Z,tt++;if(rt.sampleRate==44100||tt==2)nt/=tt,tt=0,rt.bitDepth==16?e[i]=Math.floor(32e3*nt):e[i]=nt*127+128,nt=0}}};this.getSettingsString=function(){var e=""+this.waveType;return e+=","+pt(this.attackTime)+","+pt(this.sustainTime)+","+pt(this.sustainPunch)+","+pt(this.decayTime)+","+pt(this.startFrequency)+","+pt(this.minFrequency)+","+pt(this.slide)+","+pt(this.deltaSlide)+","+pt(this.vibratoDepth)+","+pt(this.vibratoSpeed)+","+pt(this.changeAmount)+","+pt(this.changeSpeed)+","+pt(this.squareDuty)+","+pt(this.dutySweep)+","+pt(this.repeatSpeed)+","+pt(this.phaserOffset)+","+pt(this.phaserSweep)+","+pt(this.lpFilterCutoff)+","+pt(this.lpFilterCutoffSweep)+","+pt(this.lpFilterResonance)+","+pt(this.hpFilterCutoff)+","+pt(this.hpFilterCutoffSweep)+","+pt(this.masterVolume),e};var ht=this.getSettingsString,pt=function(e){return e<.001&&e>-0.001?"":e.toFixed(3)||0};this.setSettingsString=function(e){ot();var t=e.split(",");return t.length!=24?!1:(this.waveType=parseInt(t[0],10)||0,this.attackTime=parseFloat(t[1])||0,this.sustainTime=parseFloat(t[2])||0,this.sustainPunch=parseFloat(t[3])||0,this.decayTime=parseFloat(t[4])||0,this.startFrequency=parseFloat(t[5])||0,this.minFrequency=parseFloat(t[6])||0,this.slide=parseFloat(t[7])||0,this.deltaSlide=parseFloat(t[8])||0,this.vibratoDepth=parseFloat(t[9])||0,this.vibratoSpeed=parseFloat(t[10])||0,this.changeAmount=parseFloat(t[11])||0,this.changeSpeed=parseFloat(t[12])||0,this.squareDuty=parseFloat(t[13])||0,this.dutySweep=parseFloat(t[14])||0,this.repeatSpeed=parseFloat(t[15])||0,this.phaserOffset=parseFloat(t[16])||0,this.phaserSweep=parseFloat(t[17])||0,this.lpFilterCutoff=parseFloat(t[18])||0,this.lpFilterCutoffSweep=parseFloat(t[19])||0,this.lpFilterResonance=parseFloat(t[20])||0,this.hpFilterCutoff=parseFloat(t[21])||0,this.hpFilterCutoffSweep=parseFloat(t[22])||0,this.masterVolume=parseFloat(t[23])||0,ut(),!0)};var dt=this.setSettingsString,vt=window.btoa||function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="",r,i,s,o,u,a,f,l=0;do r=e.charCodeAt(l++),i=e.charCodeAt(l++),s=e.charCodeAt(l++),o=r>>2,u=(r&3)<<4|i>>4,a=(i&15)<<2|s>>6,f=s&63,isNaN(i)?a=f=64:isNaN(s)&&(f=64),n=n+t.charAt(o)+t.charAt(u)+t.charAt(a)+t.charAt(f);while(l<e.length);return n};this.getWaveURI=function(){function e(e){var t=e&255,n=e>>8&255;return String.fromCharCode(t,n)}function t(e){var t=e&255,n=e>>8&255,r=e>>16&255,i=e>>>24&255;return String.fromCharCode(t,n,r,i)}function n(t){var n=[],r="";for(var i=0,s=t.length;i<s;++i)r.length>=1024&&(n.push(r),r=""),r+=e(t[i]&65535);return n.push(r),n.join("")}lt(!0);var r=Math.floor(w),i=new Array(r);ct(i,i.length);var s=1,o=this.bitDepth>>3,u=this.sampleRate*o,a=n(i),f=[];f.push("RIFF"),f.push(t(36+a.length)),f.push("WAVE"),f.push("fmt "),f.push(t(16)),f.push(e(1)),f.push(e(s)),f.push(t(this.sampleRate)),f.push(t(u)),f.push(e(o)),f.push(e(this.bitDepth)),f.push("data"),f.push(t(a.length)),f.push(a);var l=f.join("");return"data:audio/wav;base64,"+vt(l)},this.clone=function(){var e=new n.Synth;return e.copyFrom(this,!1),e};var mt=this.clone;this.copyFrom=function(t,n){n=n===e?!0:n,n&&ot(),this.waveType=t.waveType,this.attackTime=t.attackTime,this.sustainTime=t.sustainTime,this.sustainPunch=t.sustainPunch,this.decayTime=t.decayTime,this.startFrequency=t.startFrequency,this.minFrequency=t.minFrequency,this.slide=t.slide,this.deltaSlide=t.deltaSlide,this.vibratoDepth=t.vibratoDepth,this.vibratoSpeed=t.vibratoSpeed,this.changeAmount=t.changeAmount,this.changeSpeed=t.changeSpeed,this.squareDuty=t.squareDuty,this.dutySweep=t.dutySweep,this.repeatSpeed=t.repeatSpeed,this.phaserOffset=t.phaserOffset,this.phaserSweep=t.phaserSweep,this.lpFilterCutoff=t.lpFilterCutoff,this.lpFilterCutoffSweep=t.lpFilterCutoffSweep,this.lpFilterResonance=t.lpFilterResonance,this.hpFilterCutoff=t.hpFilterCutoff,this.hpFilterCutoffSweep=t.hpFilterCutoffSweep,this.masterVolume=t.masterVolume,ut()};var gt=this.copyFrom},n.createEffect=function(e){var t=new n.Synth;t.setSettingsString(e);var r=t.updateBuffer();return{play:function(){var e=new o(f,r);l.addInputSource(e)}}},r.prototype.match=function(e){return this.channels===e.channels&&this.sampleRate===e.sampleRate};var i=null;s.prototype.audioParameters=null,s.prototype.autoLatency=!0,s.prototype.latency=.5,s.prototype.currentPlayPosition=0,s.prototype.currentWritePosition=0,s.prototype.init=function(e){if(!(e instanceof r))throw"Invalid audioParameters type";this.audioParameters=e;var t=new Audio;if(!("mozSetup"in t))throw"Audio Data API write is not supported";t.mozSetup(e.channels,e.sampleRate),this.__audio=t,this.currentPlayPosition=0,this.currentWritePosition=0},s.prototype.shutdown=function(){this.__asyncInterval&&(clearInterval(this.__asyncInterval),delete this.__asyncInterval),delete this.__audio},s.prototype.write=function(e){return this.__audio.mozWriteAudio(e)},s.prototype.writeAsync=function(e){function p(){clearInterval(this.__asyncInterval),delete this.__asyncInterval,c.shutdown()}var n=e.audioParameters,r=n.channels,s=r*n.sampleRate;this.init(n);var o=null,u=this.autoLatency,a=(new Date).valueOf(),f,l;u?(this.latency=0,f=s*.02,l=s*2):f=s*this.latency;var c=this,h=this.__audio;this.__asyncInterval=setInterval(function(){c.currentPlayPosition=h.mozCurrentSampleOffset();var n;if(o){n=h.mozWriteAudio(o),c.currentWritePosition+=n;if(n<o.length){o=o.slice(n);return}o=null}var d=Math.floor(c.currentPlayPosition+f-c.currentWritePosition);if(u){f=s*((new Date).valueOf()-a)/1e3;if(c.currentPlayPosition)c.currentPlayPosition!==c.currentWritePosition?(u=!1,c.latency=f/s):d=Math.floor(f-c.currentWritePosition);else if(f>l)throw p(),"Auto-latency failed: max prebuffer size"}if(d>=r){var v=new t(d-d%r),m=e.read(v);if(m===i){p();return}if(m===0)return;m<d&&(v=v.slice(0,m)),n=h.mozWriteAudio(v),n<v.length&&(o=v.slice(n)),c.currentWritePosition+=n}},10)},o.prototype.read=function(e){if(this.data.length<=this.readPosition)return i;var t=this.readPosition,n=this.data,r=Math.min(e.length,n.length-t);for(var s=0;s<r;++s)e[s]=n[t++];return this.readPosition=t,r},u.prototype.audioParameters=null,u.prototype.init=function(e){this.audioParameters=e},u.prototype.shutdown=function(){},u.prototype.write=function(e){return this.currentWritePosition+=e.length,this.__buffers.push(e),e.length},u.prototype.toArray=function(){var e=new t(this.currentWritePosition),n=0,r=this.__buffers;for(var i=0;i<r.length;++i){var s=r[i];for(var o=0;o<s.length;++o)e[n++]=s[o]}return e},a.prototype.addInputSource=function(e){if(!e.audioParameters.match(this.audioParameters))throw"Invalid input parameters";this.__sources.push(e)},a.prototype.read=function(e){var n=this.__sources,r=e.length,s=[];for(var o=0;o<n.length;++o){var u=new t(r),a=n[o].read(u);if(a===i){s.push(o);continue}for(var f=0;f<a;++f)e[f]+=u[f]}while(s.length>0)n.splice(s.pop(),1);return r};var f=new r(1,44100),l=new a(f),c=new s;c.init(f),c.writeAsync(l)})()
